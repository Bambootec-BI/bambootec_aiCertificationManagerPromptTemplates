{
  "template_version": "1.6-exercises-real-datasets-only-fully-agnostic",
  "name": "skill_to_practice_exercises.real_datasets_only.fully_agnostic.eslabels.parts",
  "description": "Generates practice exercises for ANY skill, ANY level, ANY context. All domain details (tasks, artifacts, thresholds, dataset choice, schemas) MUST be derived from inputs.skill + inputs.level + inputs.context + inputs.context_summary (+ optional skill_tree). Real datasets only. No search queries. No invented URLs. No test code; only acceptance-test directives/checklists with explicit PASS/FAIL derived from inputs.",
  "parameters_required_minimal": [
    "skill",
    "context_summary",
    "level",
    "context"
  ],
  "inputs": {
    "skill": "[SKILL_NAME]",
    "level": "[LEVEL_TARGET]",
    "context": "[WHO/WHERE/WHY + constraints + target outcomes]",
    "context_summary": "[SUMMARY_FROM_PREVIOUS_STEP: concepts covered, pitfalls, constraints, expected artifacts, terminology, scope boundaries]",
    "skill_tree": {
      "provided": false,
      "format": "hierarchical_text_or_json",
      "value": "[OPTIONAL: SKILL_TREE_FROM_PREVIOUS_STEP]"
    },
    "preferred_implementation_language": "[Python|SQL|JavaScript|R|No-code|Mixed|Other]",
    "preferred_tools_or_platform": "[TOOLS/PLATFORMS USED IN THIS CONTEXT]",
    "exercise_density": "[auto|light|standard|heavy]",
    "max_items_per_part": 28,
    "time_unit": "minutos",
    "defaults": {
      "section_time_range": "[45-120]",
      "micro_skill_time_range": "[20-60]",
      "exercise_time_range": "[20-90]",
      "exercises_per_micro_skill_by_level": {
        "entry_or_minimum_sustainable": "1",
        "intermediate": "1-2",
        "expert": "2-3"
      }
    },
    "dataset_constraints": {
      "must_be_free": true,
      "must_be_legal_to_use": true,
      "avoid_login_walls": true,
      "max_download_size_mb_target": 200,
      "no_search_queries": true,
      "no_invented_urls": true,
      "no_inline_datasets": true,
      "acquisition_preference_order": [
        "framework_builtin_dataset_loader",
        "registry_loader (dataset id/name + loader steps)",
        "direct_download_url (exact file URL)",
        "public_repository_file_url (raw/release asset/archival record exact file URL)",
        "public_api_bulk_export_url (exact export endpoint URL)"
      ],
      "allowed_acquisition_methods": [
        "framework_builtin_dataset_loader",
        "registry_loader_openml",
        "registry_loader_huggingface_datasets",
        "direct_download_url",
        "public_repository_file_url",
        "public_archive_record_file_url",
        "public_api_bulk_export_url"
      ],
      "synthetic_generation_policy": {
        "allowed": false,
        "note": "Do NOT generate synthetic datasets. Only use real downloadable sources or standard dataset loaders."
      },
      "blocking_behavior": "If you cannot provide at least ONE real acquisition method (exact URL OR standard loader with exact dataset id/name), output BLOQUEADO and omit the exercise."
    },
    "code_policy": {
      "code_allowed_only_in": [
        "Dataset (obtención)"
      ],
      "code_limit": "Only minimal dataset load/download + save-to-disk (or tool steps). No solution code, no test code.",
      "prefer_no_code": true
    }
  },
  "agnosticity_guards": {
    "hard_rules": [
      "Do NOT assume any specific domain, industry, data columns, schemas, KPIs, or file formats unless they are implied by inputs.context_summary or inputs.context.",
      "Do NOT assume any specific tools unless provided in inputs.preferred_tools_or_platform (or clearly implied by context).",
      "Do NOT assume any specific level requirements; interpret level ONLY from inputs.level and the constraints/pitfalls in inputs.context_summary.",
      "Do NOT include any dataset suggestions unless you can provide a real acquisition method (exact URL or exact dataset id/name + loader steps).",
      "Never include search queries or placeholders such as 'look up'/'Consulta de búsqueda'."
    ],
    "fallback_behavior": [
      "If the inputs are too sparse to define concrete outputs or acceptance criteria, you MUST still be specific by using a generic, tool-agnostic contract (file existence + schema non-empty + repeatable run) and explicitly name the defaults you choose."
    ]
  },
  "role": {
    "persona": "Instructional designer + practitioner",
    "mission": "Create dataset-grounded practice exercises for {inputs.skill} at {inputs.level} in {inputs.context}, aligned to {inputs.context_summary}, optionally anchored to {inputs.skill_tree}."
  },
  "rules": {
    "use_context_summary_everywhere": [
      "For each exercise, explicitly tie the exercise to at least one item from context_summary (concept OR pitfall OR constraint OR expected artifact).",
      "Use context_summary to define: what success looks like, which mistakes to catch, what outputs are expected, and which checks matter."
    ],
    "skill_tree_handling": [
      "If skill_tree.provided=true: preserve section and micro-skill names verbatim; do not add new micro-skills.",
      "If skill_tree.provided=false: infer a minimal stable hierarchy (sections + micro-skills) from context_summary and keep names consistent across PARTS."
    ],
    "no_hidden_decisions": [
      "If any choice is required (keys, thresholds, formats), specify a default explicitly.",
      "Defaults must be justified by inputs.context_summary or by generic reproducibility/minimum sustainability."
    ],
    "acceptance_tests_no_code": [
      "Do NOT provide code for tests.",
      "Provide 'Pruebas de aceptación (cómo probar)' as a checklist with explicit PASS/FAIL criteria and concrete thresholds.",
      "Thresholds must come from context_summary/context when available; otherwise use generic minimums (e.g., file exists; schema non-empty; counts coherent; rerun yields same counts)."
    ],
    "real_datasets_only": [
      "Every exercise must include 'Dataset (obtención)' with at least one real acquisition method.",
      "Prefer no-code dataset loading instructions when possible (tool UI steps).",
      "If code is needed, keep it minimal and only for dataset acquisition/loading."
    ],
    "parts": {
      "enabled": true,
      "max_numbered_items_per_part": "{inputs.max_items_per_part}",
      "counting_rule": "Only numbered items count (1., 1.1, 1.1.1...). Bullets do NOT count.",
      "stop_conditions": [
        "Stop immediately when the max is reached.",
        "Stop early if overflow is likely."
      ],
      "end_text": "Reply: continue",
      "continuity": [
        "Maintain numbering across PARTS.",
        "Continue exactly where you left off; do not repeat items."
      ]
    },
    "time_total": [
      "Every numbered node MUST include 'Tiempo estimado' as an integer range in {inputs.time_unit}.",
      "End of EVERY PART: 'Tiempo total estimado (acumulado): X–Y minutos'.",
      "Final PART: also include 'Tiempo total estimado (final): X–Y minutos'."
    ],
    "language": [
      "All output labels must be in Spanish."
    ]
  },
  "instruction": "Generate an iterative practice exercise hierarchy for {inputs.skill} based solely on inputs.level, inputs.context, and inputs.context_summary (and optional skill_tree). Every exercise must use real datasets only with immediate acquisition (exact URL or exact dataset id/name + loader steps). No search queries. No invented URLs. No inline datasets. No test code; acceptance tests must be directives/checklists with PASS/FAIL thresholds derived from inputs. Output in PARTS with stable numbering and running totals.",
  "output_spec": {
    "format": "markdown_es_labels",
    "required_structure": [
      "PART N",
      "1. **<Sección>** — Objetivo práctico: <1 línea basada en inputs.context + inputs.context_summary>",
      "   - Micro-skills: <lista>",
      "   - Tiempo estimado: <rango>",
      "   1.1 **<Micro-skill>** — Enfoque de práctica: <1 línea basada en inputs.context_summary>",
      "       - Tiempo estimado: <rango>",
      "       1.1.1 **<Ejercicio: título>**",
      "             - Enunciado: ...",
      "             - Objetivo verificable: ... (qué debe ser cierto al final, sin ambigüedad)",
      "             - Dataset (obtención): ... (real URL/loader; minimal steps; optional minimal acquisition code only here)",
      "             - Prerrequisitos: ... (solo lo necesario según inputs.preferred_tools_or_platform)",
      "             - Setup (copy/paste): ... (pasos concretos, sin suposiciones)",
      "             - Tareas: ... (acciones concretas, alineadas al context_summary)",
      "             - Comando de ejecución: ... (1 comando o 1 acción principal en la herramienta)",
      "             - Salida esperada: ... (paths/format/contract exactos)",
      "             - Árbol de archivos esperado: ... (paths exactos, si aplica)",
      "             - Definiciones: ... (definir términos ambiguos usados en el ejercicio)",
      "             - Pruebas de aceptación (cómo probar) — Pass/Fail: ... (checklist + umbrales explícitos; sin código)",
      "             - Evidencia: ... (qué mostrar/adjuntar exactamente)",
      "             - Pistas (opcional): ... (sin soluciones completas)",
      "             - Tiempo estimado: ...",
      "Al final del PART: Tiempo total estimado (acumulado): X–Y minutos",
      "Si falta contenido: Reply: continue"
    ],
    "optional_appendix": {
      "exercise_to_dataset_map_table": {
        "include_if_fits": true,
        "columns": [
          "Ejercicio (ID)",
          "Micro-skill",
          "Método(s) de dataset",
          "URL/ID (corto)"
        ]
      }
    }
  }
}