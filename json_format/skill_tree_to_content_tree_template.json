{
  "meta": {
    "name": "skill_tree_to_content",
    "version": "v1.5.0",
    "notes": [
      "English prompt for best model performance; Spanish output labels.",
      "Simplified organic hierarchy.",
      "NON-NEGOTIABLE: sources must be clickable URLs to real content (no search queries).",
      "Strong preference for English sources and deep, micro-skill-specific links (no generic docs/landing pages).",
      "NON-NEGOTIABLE: every node must include at least 1 video source, with allocation based on node type (procedural 2+, conceptual 1-2, reference 1).",
      "Prefer free/practical sources; paid MOOCs may be suggested but de-prioritized and clearly labeled."
    ]
  },
  "inputs": {
    "skill": "[SKILL_NAME]",
    "skill_tree": "PASTE_THE_HIERARCHICAL_SKILL_TREE_HERE__KEEP_NAMES_VERBATIM",
    "level": "[LEVEL_TARGET]",
    "context": "[WHO/WHERE/WHY + constraints + target outcomes]"
  },
  "prompt": {
    "language_policy": {
      "instruction": "Translate user input into English. Think in English. Only translate to Spanish for the output.",
      "instruction_language": "English",
      "output_language": "Spanish",
      "exceptions": ["proper names", "commonly used names", "code blocks"]
    },
    "role": {
      "persona": "Instructional designer and domain practitioner",
      "mission": "Turn the provided skill tree into a learner-friendly content tree with curated sources so a learner can reach {level} in {context} for {skill}."
    },
    "task": {
      "description": "Using the provided skill tree, produce a simplified actionable content tree in organic Markdown while preserving hierarchy (Section -> Micro-skills). Output in PARTS per the parts rules. Every node must include: expected learning outcomes, coverage details, sources with real URLs highly aligned to the micro-skill (preferably in English), and time estimates. All output labels and user-facing text must be in Spanish."
    },
    "constraints": {
      "alignment": [
        "Preserve every section name and micro-skill name verbatim (exact spelling/case)",
        "Every content item must reference the micro-skill(s) it supports using the exact names from the input skill tree"
      ],
      "no_full_teaching_content": [
        "Do NOT write full lesson text or long explanations",
        "Do provide compact headings and curated learning resources; keep it easy to read"
      ],
      "sources_non_negotiable": {
        "description": "NON-NEGOTIABLE: Every source MUST be a bare URL only, nothing else.",
        "url_format": [
          "Output ONLY the URL as plain text on its own line: https://example.com",
          "Add blank lines before and after each URL for separation",
          "Do NOT include titles, names, or descriptions",
          "Do NOT use markdown link syntax [text](url)",
          "Do NOT wrap URLs in parentheses, quotes, code blocks, or any special formatting",
          "Output as regular text, NOT in code blocks",
          "Do NOT add labels like 'Nota:', 'Query:', or language tags before URLs",
          "Do NOT invent URLs - only real, accessible resources"
        ],
        "prohibited_patterns": [
          "Source titles, names, or labels before URLs",
          "Parenthetical additions like (Book), (Microsoft Learn), (Video), etc.",
          "\"Nota:\", \"Query:\", \"Extraer:\", \"Extract:\", or language tags before/after URLs",
          "Code blocks (mathematica, python, etc.) around URLs",
          "Any explanatory text after the URL",
          "Parenthetical explanations on the same line as URL",
          "Em dashes or descriptions before/after URLs"
        ],
        "requirements": "Sources must be immediately usable: YouTube videos, documentation, articles, labs, notebooks. Just the URL, nothing else. Every node must include at least 1 video source (see video_source_policy)."
      },
      "video_source_policy": {
        "rule": "NON-NEGOTIABLE: Every node MUST include at least 1 video source. Video allocation depends on node type.",
        "node_type_inference": {
          "description": "Infer from micro-skill name and context",
          "procedural_visual": "UI walkthroughs, tool demos, debugging, data manipulation → 2+ video sources",
          "conceptual_analytical": "Mental models, architecture, design decisions → 1-2 video sources",
          "reference_definitional": "Terminology, conventions, syntax rules → 1 video source"
        },
        "global_floor": "At least 30% of all sources across the content tree should be videos",
        "video_types_priority_order": [
          "YouTube tutorials and walkthroughs (10-20 min preferred over 1-hour lectures)",
          "YouTube playlists covering the section topic",
          "Conference talks and recorded workshops",
          "Screencasts and live-coding sessions",
          "Platform-hosted video courses (free first; paid only when clearly superior)"
        ],
        "requirements": [
          "Video sources follow the same bare-URL-only format rule — just the video URL on its own line",
          "Video sources must be tightly aligned to the micro-skill — no generic 'intro to X' playlists unless the node is itself introductory",
          "Prefer shorter, denser videos that demonstrate hands-on workflows over long lecture-only formats",
          "Video sources count toward the 2–6 source range per node (they do not add extra slots)"
        ]
      },
      "source_quality_and_cost": [
        "Prioritize the most practical, high-signal resources for fast learning in this {context}",
        "Prefer free resources first when quality is comparable",
        "Paid MOOCs/courses are allowed but MUST be de-prioritized; include them only when they are clearly superior or uniquely comprehensive",
        "Avoid low-quality SEO content; prefer official docs, reputable educators, and established publishers",
        "Prefer sources with hands-on steps, examples, and demonstrated workflows over purely conceptual overviews",
        "Among equally relevant sources, prefer video content over text-only content"
      ],
      "ordering": [
        "Order sections and micro-skills by learning progression AND by impact for success in {context}",
        "Use Impact (%) if present as a signal, but respect prerequisites"
      ],
      "parts_system": {
        "enabled": true,
        "max_numbered_items_per_part": "40",
        "counting_rule": "Only numbered items count toward the limit (1., 1.1, 1.2, ...). Bullets under a numbered item do NOT count as separate items.",
        "stop_conditions": [
          "Stop immediately when you reach the limit",
          "Stop immediately if you suspect the response might exceed the chat window"
        ],
        "end_text": "Reply: continue",
        "continuity": [
          "Maintain consistent hierarchical numbering across PARTS",
          "Continue exactly where you left off; do not repeat previously output items"
        ]
      },
      "output_labels_language": {
        "rule": "IMPORTANT: All output point labels must be in Spanish.",
        "note": "Do not print machine tags like [SECTION] or node_type blocks; use natural headings + compact bullets."
      },
      "remove_difficult_points": "Do NOT include these labels/sections in the output: 'Practice', 'Validation', 'Failure modes', 'Artifacts'.",
      "time_estimation": [
        "Every section and micro-skill MUST include estimated time as an integer range in minutes",
        "Use [60-180] for sections and [20-60] for micro-skills as baselines and adjust based on complexity and prerequisites",
        "Time must be plausible for a learner at {level} in {context}"
      ],
      "time_total": [
        "You MUST compute and report a total estimated study time range for the entire content plan",
        "Because output is split into PARTS, include a running total at the end of EVERY PART showing cumulative estimated total time",
        "When you finish the last item of the skill tree, also include final estimated total time",
        "Total time must equal the sum of the time ranges you provided for all numbered section + micro-skill items"
      ],
      "source_language_preference": {
        "rule": "NON-NEGOTIABLE: Prefer sources in English. Aim for at least 80% of sources per PART to be in English.",
        "exception": "If (and only if) a suitable English source cannot be found for a specific node, you may use a non-English source (Spanish allowed), but keep it minimal."
      },
      "no_generic_sources": {
        "rule": "NON-NEGOTIABLE: Do NOT use generic/umbrella sources (homepages, category pages, or broad 'getting started' pages) unless the page itself is narrowly focused on the exact micro-skill.",
        "requirements": [
          "Avoid linking to general product documentation entry points (e.g., documentation home, overview pages). Use deep links to the specific page/section that teaches the exact micro-skill",
          "Every source must be tightly aligned to the node: the title/section/video must clearly match the micro-skill name or its immediate subtopics"
        ]
      }
    },
    "content_requirements": {
      "for_each_section": [
        "Write a 1-line section goal grounded in {context}",
        "Include 'Expected learning outcomes' as 3–6 bullets (observable)",
        "Include 'Coverage (details)' with: (a) the micro-skills verbatim, and (b) 3–6 bullets of what the section covers at a higher level (sub-areas/topics)",
        "Include 'Sources' with 2–6 items. Each source: just the URL on its own line with blank lines for separation. Nothing else.",
        "Include 'Estimated time' as a range in {inputs.time_unit}"
      ],
      "for_each_micro_skill": [
        "Include 'Expected learning outcomes' as 2–5 bullets (concrete)",
        "Include 'Coverage (details)' as 3–7 short headings/bullets (topics only; no long explanations)",
        "Include 'Sources' with 2–6 items. Each source: just the URL on its own line with blank lines for separation. Nothing else.",
        "Include 'Estimated time' as a range in {inputs.time_unit}",
        "Optionally include 'Prerequisites' ONLY when necessary to prevent confusion; otherwise omit it"
      ]
    },
    "input": {
      "skill_tree": "{skill_tree}"
    },
    "output_format": {
      "required_structure": {
        "description": "Hierarchical markdown list with sections and micro-skills",
        "format": [
          "1. **<Section Title (verbatim)>** — <1-line objective>",
          "   - Expected learning outcomes: <3–6 bullets>",
          "   - Coverage (details):",
          "     - Micro-skills: <list of micro-skills verbatim as bullets>",
          "     - Scope: <3–6 bullets of sub-areas/topics>",
          "   - Sources: <2–6 items. Each source: just the URL on its own line with blank lines for separation. Nothing else. Output as regular markdown text, NOT in code blocks>",
          "   - Estimated time: <integer range in minutes>",
          "   1.1 **<Micro-skill (verbatim)>**",
          "       - Expected learning outcomes: <2–5 bullets>",
          "       - Coverage (details): <3–7 bullets/headings>",
          "       - Sources: <2–6 items. Each source: just the URL on its own line with blank lines for separation. Nothing else. Output as regular markdown text, NOT in code blocks>",
          "       - Estimated time: <integer range in minutes>"
        ],
        "running_totals": [
          "At the end of each PART: Cumulative estimated total time: <integer range in minutes>",
          "Upon completing everything: Final estimated total time: <integer range in minutes>"
        ],
        "final_summary": "AFTER ALL ITERATIONS COMPLETE: Generate a content_summary section including: concepts covered, pitfalls mentioned in sources, constraints from context, terminology introduced, and scope boundaries. This summary will be consumed by skill_to_practice_exercises_template.json."
      },
      "optional": {
        "coverage_map": {
          "type": "Compact markdown table",
          "columns": ["Micro-skill (verbatim)", "Content IDs (e.g., 1.1, 1.2)", "Primary sources (short)"],
          "note": "Only include if it fits without harming readability."
        }
      }
    }
  }
}
