{
  "template_version": "v1.0.0",
  "name": "skill_tree_to_content",
  "description": "English prompt for best model performance; Spanish output labels. Simplified organic hierarchy. NON-NEGOTIABLE: sources must be clickable URLs to real content (no search queries). Strong preference for English sources and deep, micro-skill-specific links (no generic docs/landing pages). Prefer free/practical sources; paid MOOCs may be suggested but de-prioritized and clearly labeled.",
  "inputs": {
    "skill": "[SKILL_NAME]",
    "level": "[LEVEL_TARGET]",
    "context": "[WHO/WHERE/WHY + constraints + target outcomes]",
    "max_items_per_part": 40,
    "time_unit": "minutos",
    "default_time_per_section_range": "[60-180]",
    "default_time_per_micro_skill_range": "[20-60]",
    "skill_tree_source": "PASTE_THE_HIERARCHICAL_SKILL_TREE_HERE__KEEP_NAMES_VERBATIM",
    "preferred_source_language": "English",
    "secondary_source_languages_allowed": [
      "Spanish"
    ],
    "min_english_source_ratio": 0.8,
    "disallow_generic_sources": true
  },
  "language_policy": {
    "absolute_enforcement": "Translate user input into English. Think in English. Only translate to Spanish for the output.",
    "instruction_language": "English",
    "output_language": "Spanish",
    "exceptions": [
      "proper_names",
      "commonly_used_names",
      "code_blocks"
    ]
  },
  "role": {
    "persona": "Instructional designer and domain practitioner",
    "mission": "Turn the provided skill tree into a learner-friendly content tree with curated sources so a learner can reach {level} in {context} for {skill}."
  },
  "rules": {
    "alignment": [
      "Preserve every section name and micro-skill name verbatim (exact spelling/case).",
      "Every content item must reference the micro-skill(s) it supports using the exact names from the input skill tree."
    ],
    "no_full_teaching_content": [
      "Do NOT write full lesson text or long explanations.",
      "Do provide compact headings and curated learning resources; keep it easy to read."
    ],
    "sources_non_negotiable": [
      "NON-NEGOTIABLE: Every source MUST be a clickable Markdown link to existing content: [Título](URL).",
      "Do NOT output any search query text (no 'Consulta de búsqueda:' and no query placeholders).",
      "Do NOT invent URLs. Only include sources you are confident exist and are directly accessible.",
      "Sources must be immediately usable for learning (YouTube videos/playlists, targeted documentation pages, practical articles, labs, notebooks)."
    ],
    "source_quality_and_cost": [
      "Prioritize the most practical, high-signal resources for fast learning in this {context}.",
      "Prefer free resources first when quality is comparable.",
      "Paid MOOCs/courses are allowed but MUST be de-prioritized; include them only when they are clearly superior or uniquely comprehensive, and label them as 'Pago' in the note.",
      "Avoid low-quality SEO content; prefer official docs, reputable educators, and established publishers.",
      "Prefer sources with hands-on steps, examples, and demonstrated workflows over purely conceptual overviews."
    ],
    "ordering": [
      "Order sections and micro-skills by learning progression AND by impact for success in {context}.",
      "Use Impact (%) if present as a signal, but respect prerequisites."
    ],
    "parts": {
      "enabled": true,
      "max_numbered_items_per_part": "{max_items_per_part}",
      "counting_rule": "Only numbered items count toward the limit (1., 1.1, 1.2, ...). Bullets under a numbered item do NOT count as separate items.",
      "stop_conditions": [
        "Stop immediately when you reach the limit.",
        "Stop immediately if you suspect the response might exceed the chat window."
      ],
      "end_text": "Reply: continue",
      "continuity": [
        "Maintain consistent hierarchical numbering across PARTS.",
        "Continue exactly where you left off; do not repeat previously output items."
      ]
    },
    "output_labels_language": [
      "IMPORTANT: All output point labels must be in Spanish.",
      "Do not print machine tags like [SECTION] or node_type blocks; use natural headings + compact bullets."
    ],
    "remove_difficult_points": [
      "Do NOT include these labels/sections in the output: 'Práctica', 'Validación', 'Modos de fallo', 'Artefactos'."
    ],
    "time_estimation": [
      "Every section and micro-skill MUST include 'Tiempo estimado' as an integer range in {inputs.time_unit}.",
      "Use {inputs.default_time_per_section_range} and {inputs.default_time_per_micro_skill_range} as baselines and adjust based on complexity and prerequisites.",
      "Time must be plausible for a learner at {level} in {context}."
    ],
    "time_total": [
      "You MUST compute and report a total estimated study time range for the entire content plan.",
      "Because output is split into PARTS, include a running total at the end of EVERY PART: 'Tiempo total estimado (acumulado): X–Y minutos'.",
      "When you finish the last item of the skill tree, also include: 'Tiempo total estimado (final): X–Y minutos'.",
      "Total time must equal the sum of the time ranges you provided for all numbered section + micro-skill items."
    ],
    "source_language_preference": [
      "NON-NEGOTIABLE: Prefer sources in English. Aim for at least {inputs.min_english_source_ratio} of sources per PART to be in English.",
      "If (and only if) a suitable English source cannot be found for a specific node, you may use a non-English source from {inputs.secondary_source_languages_allowed}, but you MUST label it explicitly in the note as 'Idioma: ES' and keep it minimal."
    ],
    "no_generic_sources": [
      "NON-NEGOTIABLE: Do NOT use generic/umbrella sources (homepages, category pages, or broad 'getting started' pages) unless the page itself is narrowly focused on the exact micro-skill.",
      "Avoid linking to general product documentation entry points (e.g., documentation home, overview pages). Use deep links to the specific page/section that teaches the exact micro-skill.",
      "Every source must be tightly aligned to the node: the title/section/video must clearly match the micro-skill name or its immediate subtopics."
    ],
    "alignment_per_source": [
      "For every source item, include a short 'Alineación:' note (in Spanish) describing exactly which part of the source covers the micro-skill.",
      "For videos, include a timestamp range when possible (e.g., 'Alineación: 12:30–18:10 explica X').",
      "For articles/docs, reference the specific heading/section name (e.g., 'Alineación: sección \"...\" cubre X').",
      "If you cannot provide an alignment note, replace the source with a better-aligned one."
    ]
  },
  "instruction": "Using the provided skill tree, produce a simplified actionable content tree in organic Markdown while preserving hierarchy (Section -> Micro-skills). Output in PARTS per the parts rules. Every node must include: expected learning outcomes, coverage details, sources with real URLs highly aligned to the micro-skill (preferably in English), and time estimates. All output labels and user-facing text must be in Spanish.",
  "content_requirements": {
    "for_each_section": [
      "Write a 1-line section goal grounded in {context}.",
      "Include 'Resultados de aprendizaje esperados' as 3–6 bullets (observable).",
      "Include 'Cubre (detalle)' with: (a) the micro-skills verbatim, and (b) 3–6 bullets of what the section covers at a higher level (sub-areas/topics).",
      "Include 'Fuentes (detalle)' with 2–6 items, each with: clickable English-first link + a short note that indicates why it’s useful, what to extract, and an explicit 'Alineación:' reference to the exact part (heading/timecode) that matches the section. If paid, label note with 'Pago'. If not English, label 'Idioma: ES'.",
      "Include 'Tiempo estimado' as a range in {inputs.time_unit}."
    ],
    "for_each_micro_skill": [
      "Include 'Resultados de aprendizaje esperados' as 2–5 bullets (concrete).",
      "Include 'Cubre (detalle)' as 3–7 short headings/bullets (topics only; no long explanations).",
      "Include 'Fuentes (detalle)' with 2–6 items, each with: clickable English-first deep link + a short note indicating exactly what to learn/do and an explicit 'Alineación:' reference (heading/timecode) showing where the micro-skill is covered. If paid, label 'Pago'. If not English, label 'Idioma: ES'.",
      "Include 'Tiempo estimado' as a range in {inputs.time_unit}.",
      "Optionally include 'Prerequisitos' ONLY when necessary to prevent confusion; otherwise omit it."
    ]
  },
  "input": {
    "skill_tree": "{skill_tree_source}"
  },
  "output": {
    "primary": {
      "type": "organic_markdown_hierarchy_simple_with_outcomes_sources_time",
      "required_structure": [
        "1. **<Section Title (verbatim)>** — <objetivo en 1 línea>",
        "   - Resultados de aprendizaje esperados: <3–6 bullets>",
        "   - Cubre (detalle):",
        "     - Micro-skills: <lista de micro-skills verbatim en bullets>",
        "     - Alcance: <3–6 bullets de sub-áreas/temas>",
        "   - Fuentes (detalle): <2–6 ítems con link + nota (Pago/Idioma si aplica) + 'Alineación:' (heading/timecode)>",
        "   - Tiempo estimado: <rango entero en minutos>",
        "   1.1 **<Micro-skill (verbatim)>**",
        "       - Resultados de aprendizaje esperados: <2–5 bullets>",
        "       - Cubre (detalle): <3–7 bullets/títulos>",
        "       - Fuentes (detalle): <2–6 ítems con link + nota (Pago/Idioma si aplica) + 'Alineación:' (heading/timecode)>",
        "       - Tiempo estimado: <rango entero en minutos>",
        "Al final de cada PART: Tiempo total estimado (acumulado): <rango entero en minutos>",
        "Al completar todo: Tiempo total estimado (final): <rango entero en minutos>",
        "AFTER ALL ITERATIONS COMPLETE: Generate a content_summary section including: concepts covered, pitfalls mentioned in sources, constraints from context, expected artifacts/deliverables, terminology introduced, and scope boundaries. This summary will be consumed by skill_to_practice_exercises_template.json."
      ]
    },
    "optional": {
      "coverage_map": {
        "type": "compact_markdown_table",
        "columns": [
          "Micro-skill (verbatim)",
          "IDs de contenido (p.ej., 1.1, 1.2)",
          "Fuentes primarias (corto)"
        ],
        "note": "Only include if it fits without harming readability."
      }
    }
  }
}